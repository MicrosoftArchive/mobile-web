@model MileageStats.Web.Models.VehicleFormModel
@{
    Layout = "~/Views/Shared/_Layout.Mobile.cshtml";
    ViewBag.Title = "Edit Vehicle";
}
<nav>
    <ol class="title">
        <li><a href="@Url.Action("Index", "Dashboard")" class="dashboard icon only"><span>Dashboard</span></a></li>
        <li>Edit Vehicle</li>
    </ol>
</nav>

<div class="view">
    @using (Html.BeginForm("Edit", "Vehicle", FormMethod.Post))
    {
        @Html.Hidden("vehicleId", Model.VehicleId);
        Html.RenderPartial("VehicleForm", Model);
        <p class="instructions">
            Note: Year, Make and Model are optional.
        </p>
    }
    <ol class="hbox button-group">
        <li class="icon false">
            @if (Request.Browser.IsWow())
            {
                using (Html.BeginForm("Delete", "Vehicle", new { id = Model.VehicleId }, FormMethod.Post))
                {
                    @Html.AntiForgeryToken()

                    <button id="DeleteVehicleButton" type="submit" value="delete" name="action">
                        <span>Delete</span></button>
                }       
            }
            else
            {
                using (Html.BeginForm("ConfirmDelete", "Vehicle", new {id = Model.VehicleId}, FormMethod.Get))
                {
                    <button type="submit" value="delete" name="action" class="false">
                        <span>Delete</span></button>
                }
            }
        </li>
    </ol>
</div>
@if (Request.Browser.IsWow())
{
    <script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.6.1.min.js"></script>
    <script>
        $("#DeleteVehicleButton").click(function (event) {
            var answer = confirm("Are you sure you want to delete this vehicle and all of it's related data?");
            if (!answer) {
                event.preventDefault();
            }

        })
    </script>
}